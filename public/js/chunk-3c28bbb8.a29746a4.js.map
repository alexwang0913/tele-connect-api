{"version":3,"sources":["webpack:///./src/views/Chat.vue?4066","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?6ed9","webpack:///./src/views/Chat.vue","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","contact","index","key","class","_id","friendId","attrs","on","$event","joinRoom","getAvatarUrl","avatarUrl","_v","_s","name","friendInfo","preventDefault","openVoiceCall","history","user","senderId","_e","content","time","directives","rawName","value","expression","domProps","type","indexOf","keyCode","sendMessage","target","composing","message","staticRenderFns","data","contacts","$route","query","computed","$store","state","histories","chatHistories","mounted","loadContacts","destroyed","methods","url","length","images","userId","find","channel","commit","$socket","emit","receiverId","senderName","component","isObject","isArray","wellKnownSymbol","SPECIES","module","exports","originalArray","C","constructor","Array","prototype","undefined","$","$find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","proto","forced","callbackfn","arguments","DESCRIPTORS","fails","has","defineProperty","Object","cache","thrower","it","METHOD_NAME","options","method","ACCESSORS","argument0","argument1","O","enumerable","get","call","f","FunctionPrototype","Function","FunctionPrototypeToString","toString","nameRE","NAME","configurable","match","error","bind","IndexedObject","toObject","toLength","arraySpeciesCreate","push","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","that","specificCreate","result","self","boundFunction","create","forEach","map","filter","some","every","findIndex","classof","arg"],"mappings":"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","file":"js/chunk-3c28bbb8.a29746a4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xl-12\"},[_c('div',{staticClass:\"chat-window\"},[_c('div',{staticClass:\"chat-cont-left\"},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"chat-users-list\"},[_c('div',{staticClass:\"chat-scroll\"},_vm._l((_vm.contacts),function(contact,index){return _c('a',{key:(\"contact-\" + index),staticClass:\"media read-chat\",class:{'active': contact._id == _vm.friendId},attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){return _vm.joinRoom(contact._id)}}},[_c('div',{staticClass:\"media-img-wrap\"},[_c('div',{staticClass:\"avatar avatar-online\"},[_c('img',{staticClass:\"avatar-img rounded-circle\",attrs:{\"src\":_vm.getAvatarUrl(contact.avatarUrl),\"alt\":\"User Image\"}})])]),_c('div',{staticClass:\"media-body\"},[_c('div',[_c('div',{staticClass:\"user-name\"},[_vm._v(_vm._s(contact.name))])]),_c('div')])])}),0)])]),(_vm.friendId)?_c('div',{staticClass:\"chat-cont-right\"},[_c('div',{staticClass:\"chat-header\"},[_vm._m(2),_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-img-wrap\"},[_c('div',{staticClass:\"avatar avatar-online\"},[_c('img',{staticClass:\"avatar-img rounded-circle\",attrs:{\"src\":_vm.getAvatarUrl(_vm.friendInfo.avatarUrl),\"alt\":\"User Image\"}})])]),_c('div',{staticClass:\"media-body\"},[_c('div',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.friendInfo.name))]),_c('div',{staticClass:\"user-status\"},[_vm._v(\"online\")])])]),_c('div',{staticClass:\"chat-options\"},[_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){$event.preventDefault();return _vm.openVoiceCall($event)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"local_phone\")])]),_vm._m(3),_vm._m(4)])]),_c('div',{staticClass:\"chat-body\"},[_c('div',{staticClass:\"chat-scroll\"},[_c('ul',{staticClass:\"list-unstyled\"},_vm._l((_vm.histories),function(history,index){return _c('li',{key:(\"history-\" + index),staticClass:\"media\",class:[{'sent': _vm.user._id == history.senderId}, {'received': history.senderId == _vm.friendId}]},[(history.senderId == _vm.friendId)?_c('div',{staticClass:\"avatar\"},[_c('img',{staticClass:\"avatar-img rounded-circle\",attrs:{\"src\":_vm.getAvatarUrl(_vm.friendInfo.avatarUrl),\"alt\":\"User Image\"}})]):_vm._e(),_c('div',{staticClass:\"media-body\"},[_c('div',{staticClass:\"msg-box\"},[_c('div',[_c('p',[_vm._v(_vm._s(history.content))]),_c('ul',{staticClass:\"chat-msg-info\"},[_c('li',[_c('div',{staticClass:\"chat-time\"},[_c('span',[_vm._v(_vm._s(history.time))])])])])])])])])}),0)])]),_c('div',{staticClass:\"chat-footer\"},[_c('div',{staticClass:\"input-group\"},[_vm._m(5),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],staticClass:\"input-msg-send form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Type something\"},domProps:{\"value\":(_vm.message)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==13){ return null; }return _vm.sendMessage($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn msg-send-btn\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.sendMessage}},[_c('i',{staticClass:\"fab fa-telegram-plane\"})])])])])]):_vm._e()])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-header\"},[_c('span',[_vm._v(\"Chats\")]),_c('a',{staticClass:\"chat-compose\",attrs:{\"href\":\"javascript:void(0)\"}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"control_point\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"chat-search\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('i',{staticClass:\"fas fa-search\"})]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Search\"}})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"back-user-list\",attrs:{\"id\":\"back_user_list\",\"href\":\"javascript:void(0)\"}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"chevron_left\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#video_call\"}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"videocam\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":\"javascript:void(0)\"}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"more_vert\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"btn-file btn\"},[_c('i',{staticClass:\"fa fa-paperclip\"}),_c('input',{attrs:{\"type\":\"file\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-xl-12\">\r\n          <div class=\"chat-window\">\r\n            <!-- Chat Left -->\r\n            <div class=\"chat-cont-left\">\r\n              <div class=\"chat-header\">\r\n                <span>Chats</span>\r\n                <a href=\"javascript:void(0)\" class=\"chat-compose\">\r\n                  <i class=\"material-icons\">control_point</i>\r\n                </a>\r\n              </div>\r\n              <form class=\"chat-search\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <i class=\"fas fa-search\"></i>\r\n                  </div>\r\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Search\" />\r\n                </div>\r\n              </form>\r\n              <div class=\"chat-users-list\">\r\n                <div class=\"chat-scroll\">\r\n                  <a\r\n                    href=\"javascript:void(0);\"\r\n                    class=\"media read-chat\"\r\n                    v-for=\"(contact, index) in contacts\"\r\n                    :key=\"`contact-${index}`\"\r\n                    :class=\"{'active': contact._id == friendId}\"\r\n                    @click=\"joinRoom(contact._id)\"\r\n                  >\r\n                    <div class=\"media-img-wrap\">\r\n                      <div class=\"avatar avatar-online\">\r\n                        <img\r\n                          :src=\"getAvatarUrl(contact.avatarUrl)\"\r\n                          alt=\"User Image\"\r\n                          class=\"avatar-img rounded-circle\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"media-body\">\r\n                      <div>\r\n                        <div class=\"user-name\">{{contact.name}}</div>\r\n                        <!-- <div class=\"user-last-chat\">Hey, How are you?</div> -->\r\n                      </div>\r\n                      <div>\r\n                        <!-- <div class=\"last-chat-time block\">2 min</div>\r\n                        <div class=\"badge badge-success badge-pill\">15</div>-->\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- /Chat Left -->\r\n\r\n            <!-- Chat Right -->\r\n            <div class=\"chat-cont-right\" v-if=\"friendId\">\r\n              <div class=\"chat-header\">\r\n                <a id=\"back_user_list\" href=\"javascript:void(0)\" class=\"back-user-list\">\r\n                  <i class=\"material-icons\">chevron_left</i>\r\n                </a>\r\n                <div class=\"media\">\r\n                  <div class=\"media-img-wrap\">\r\n                    <div class=\"avatar avatar-online\">\r\n                      <img\r\n                        :src=\"getAvatarUrl(friendInfo.avatarUrl)\"\r\n                        alt=\"User Image\"\r\n                        class=\"avatar-img rounded-circle\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"media-body\">\r\n                    <div class=\"user-name\">{{friendInfo.name}}</div>\r\n                    <div class=\"user-status\">online</div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"chat-options\">\r\n                  <a href=\"javascript:void(0)\" @click.prevent=\"openVoiceCall\">\r\n                    <i class=\"material-icons\">local_phone</i>\r\n                  </a>\r\n                  <a href=\"javascript:void(0)\" data-toggle=\"modal\" data-target=\"#video_call\">\r\n                    <i class=\"material-icons\">videocam</i>\r\n                  </a>\r\n                  <a href=\"javascript:void(0)\">\r\n                    <i class=\"material-icons\">more_vert</i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class=\"chat-body\">\r\n                <div class=\"chat-scroll\">\r\n                  <ul class=\"list-unstyled\">\r\n                    <li\r\n                      class=\"media\"\r\n                      v-for=\"(history, index) in histories\"\r\n                      :key=\"`history-${index}`\"\r\n                      :class=\"[{'sent': user._id == history.senderId}, {'received': history.senderId == friendId}]\"\r\n                    >\r\n                      <div class=\"avatar\" v-if=\"history.senderId == friendId\">\r\n                        <img\r\n                          :src=\"getAvatarUrl(friendInfo.avatarUrl)\"\r\n                          alt=\"User Image\"\r\n                          class=\"avatar-img rounded-circle\"\r\n                        />\r\n                      </div>\r\n                      <div class=\"media-body\">\r\n                        <div class=\"msg-box\">\r\n                          <div>\r\n                            <p>{{history.content}}</p>\r\n                            <ul class=\"chat-msg-info\">\r\n                              <li>\r\n                                <div class=\"chat-time\">\r\n                                  <span>{{history.time}}</span>\r\n                                </div>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div class=\"chat-footer\">\r\n                <div class=\"input-group\">\r\n                  <div class=\"input-group-prepend\">\r\n                    <div class=\"btn-file btn\">\r\n                      <i class=\"fa fa-paperclip\"></i>\r\n                      <input type=\"file\" />\r\n                    </div>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"input-msg-send form-control\"\r\n                    placeholder=\"Type something\"\r\n                    v-model=\"message\"\r\n                    v-on:keyup.13=\"sendMessage\"\r\n                  />\r\n                  <div class=\"input-group-append\">\r\n                    <button type=\"button\" class=\"btn msg-send-btn\" @click=\"sendMessage\">\r\n                      <i class=\"fab fa-telegram-plane\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- /Chat Right -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- /Row -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { API_URL } from \"@/config\";\r\nimport { AgoraRtmClient } from \"@/agora\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      contacts: [],\r\n      friendId: this.$route.query.friendId,\r\n      friendInfo: {},\r\n      message: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    user() {\r\n      return this.$store.state.user;\r\n    },\r\n    histories() {\r\n      return this.$store.state.chatHistories;\r\n    }\r\n  },\r\n  mounted() {\r\n    $(\"body\").addClass(\"chat-page\");\r\n    this.loadContacts();\r\n    // this.loadChatHistory();\r\n  },\r\n  destroyed() {\r\n    $(\"body\").removeClass(\"chat-page\");\r\n  },\r\n  methods: {\r\n    async loadContacts() {\r\n      this.$vs.loading();\r\n      const response = await axios.post(API_URL + \"users/loadContacts\", {\r\n        userId: this.user._id\r\n      });\r\n      this.contacts = response.data.contacts;\r\n      this.$vs.loading.close();\r\n      if (this.friendId != null) {\r\n        this.friendInfo = this.contacts.find(contact => {\r\n          return contact._id == this.friendId;\r\n        });\r\n      }\r\n    },\r\n    getAvatarUrl(url) {\r\n      if (url && url.length > 0) {\r\n        return url;\r\n      }\r\n      var images = require.context(\"../assets/img\", false, /\\.jpg$/);\r\n      return images(\"./default-avatar.jpg\");\r\n    },\r\n    async loadChatHistory() {\r\n      const response = await axios.post(API_URL + \"chats/getHistory\", {\r\n        senderId: this.user._id,\r\n        receiverId: this.friendId\r\n      });\r\n      this.histories = response.data;\r\n      // this.histories = [\r\n      //   {\r\n      //     senderId: \"5e8af353e5fdd01a505eb43d\",\r\n      //     receiverId: \"5e8b11ac32fc534970f4cde5\",\r\n      //     content: \"Hello. What can I do for you?\",\r\n      //     time: \"8:30 AM\"\r\n      //   },\r\n      //   {\r\n      //     senderId: \"5e8b11ac32fc534970f4cde5\",\r\n      //     receiverId: \"5e8af353e5fdd01a505eb43d\",\r\n      //     content:\r\n      //       \"I'm just looking around. \\n Will you tell me something about your self?\",\r\n      //     time: \"8:35 AM\"\r\n      //   }\r\n      // ];\r\n    },\r\n    async sendMessage() {\r\n      const sendResult = await AgoraRtmClient.sendMessageToPeer(\r\n        {\r\n          text: this.message\r\n        },\r\n        this.friendId\r\n      );\r\n      console.log(sendResult);\r\n      const today = new Date();\r\n      this.$store.commit(\"addChatHistory\", {\r\n        senderId: this.user._id,\r\n        receiverId: this.friendId,\r\n        content: this.message,\r\n        time: today.getHours() + \":\" + today.getMinutes()\r\n      });\r\n      this.message = \"\";\r\n    },\r\n    joinRoom(userId) {\r\n      this.friendId = userId;\r\n      this.friendInfo = this.contacts.find(contact => {\r\n        return contact._id == this.friendId;\r\n      });\r\n    },\r\n    openVoiceCall() {\r\n      const now = new Date();\r\n      const channel = `channel-${now.getTime()}`;\r\n      this.friendInfo[\"channel\"] = channel;\r\n\r\n      this.$store.commit(\"setCallUser\", this.friendInfo);\r\n      this.$store.commit(\"updateCallDialogVisibility\", true);\r\n\r\n      this.$socket.emit(\"REQEST_VOICE_CALL\", {\r\n        receiverId: this.friendId,\r\n        senderId: this.user._id,\r\n        senderName: this.user.name,\r\n        avatarUrl: this.user.avatarUrl,\r\n        channel: channel\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=33388112&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33388112\",\n  null\n  \n)\n\nexport default component.exports","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n"],"sourceRoot":""}